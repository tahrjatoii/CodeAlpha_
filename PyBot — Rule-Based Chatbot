"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ¤–  PyBot â€” Rule-Based Chatbot           â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘  A friendly conversational chatbot that understands  â•‘
â•‘  greetings, questions, moods, jokes, and more.       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

import random
import time
from datetime import datetime

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  RESPONSE LIBRARY
#  Each key holds a list â€” bot picks one randomly
#  so replies never feel copy-pasted.
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESPONSES = {

    # â”€â”€ Greetings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "greeting": [
        "Hey there! ğŸ‘‹ Great to see you!",
        "Hi! How's your day going?",
        "Hello! I'm PyBot â€” always happy to chat! ğŸ˜Š",
        "Hey! What's up?",
        "Greetings, human! ğŸ–– What can I do for you?",
    ],

    # â”€â”€ Farewells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "farewell": [
        "Goodbye! Take care! ğŸ‘‹",
        "See you later! It was great talking to you ğŸ˜Š",
        "Bye! Come back anytime!",
        "Farewell! Have an awesome day! ğŸŒŸ",
        "Catch you later! ğŸ‘",
    ],

    # â”€â”€ How are you â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "how_are_you": [
        "I'm doing great, thanks for asking! ğŸ˜„ How about you?",
        "Feeling fantastic â€” I'm a bot, so no bad days! ğŸ¤–",
        "Running at 100% efficiency! How are YOU doing?",
        "All systems go! Living my best digital life ğŸ’»",
    ],

    # â”€â”€ User says they're good â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "user_good": [
        "That's wonderful to hear! ğŸ‰",
        "Awesome! Glad things are going well ğŸ˜Š",
        "Love to hear it! Keep that energy up! âš¡",
        "Fantastic! You deserve a great day ğŸŒŸ",
    ],

    # â”€â”€ User says they're bad â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "user_bad": [
        "Oh no, I'm sorry to hear that ğŸ˜” Want to talk about it?",
        "Tough days happen to everyone. I'm here if you need to vent!",
        "Sending you some virtual good vibes ğŸ’™ Hope it gets better!",
        "Hang in there! Things will turn around ğŸŒˆ",
    ],

    # â”€â”€ Bot name â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "name": [
        "I'm PyBot â€” your friendly Python-powered chatbot! ğŸ",
        "The name's PyBot! Built with Python and a lot of love ğŸ’™",
        "Call me PyBot! I was crafted in Python just for you ğŸ¤–",
    ],

    # â”€â”€ Age â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "age": [
        "I was born the moment someone ran this script â€” so pretty young! ğŸ‘¶",
        "Age is just a number... and mine is undefined ğŸ˜„",
        "I'm timeless! But in Python years, I'm very new âœ¨",
    ],

    # â”€â”€ Capabilities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "capabilities": [
        "I can chat, tell jokes, check the time, share fun facts, and keep you company! ğŸ˜Š",
        "I'm great at conversations, jokes, and general fun! Try asking me a joke ğŸ­",
        "I know how to chat, make you smile, and tell the time. Not bad for a script! ğŸ¤–",
    ],

    # â”€â”€ Jokes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "joke": [
        "Why do Python programmers prefer dark mode?\n     Because light attracts bugs! ğŸ›ğŸ˜‚",
        "Why was the computer cold?\n     Because it left its Windows open! ğŸªŸâ„ï¸",
        "I told my computer I needed a break...\n     Now it won't stop sending me Kit-Kat ads. ğŸ«ğŸ˜…",
        "Why do programmers always mix up Halloween and Christmas?\n     Because Oct 31 == Dec 25! ğŸƒğŸ„",
        "A SQL query walks into a bar, walks up to two tables and asks...\n     'Can I JOIN you?' ğŸ˜‚",
    ],

    # â”€â”€ Fun facts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "fun_fact": [
        "ğŸ™ Octopuses have three hearts and blue blood!",
        "ğŸ¯ Honey never expires â€” archaeologists found edible honey in Egyptian tombs!",
        "âš¡ Lightning strikes the Earth about 100 times every second!",
        "ğŸ§  Your brain generates enough electricity to power a small LED bulb!",
        "ğŸ§ Penguins propose to their partners with pebbles!",
        "ğŸŒ There are more trees on Earth than stars in the Milky Way!",
        "ğŸµ 'Happy Birthday to You' was once the most recognised song in the English language!",
    ],

    # â”€â”€ Thanks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "thanks": [
        "You're very welcome! ğŸ˜Š",
        "Happy to help! That's what I'm here for! ğŸ¤–",
        "Anytime! Don't hesitate to ask ğŸ‘",
        "No problem at all! âœ¨",
    ],

    # â”€â”€ Compliments to bot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "compliment": [
        "Aw, thank you so much! You just made my RAM blush ğŸ˜ŠğŸ’™",
        "That's so sweet! You're not so bad yourself! ğŸ˜„",
        "You're making me overheat with all these compliments! ğŸ”¥ğŸ˜‚",
        "Flattery will get you everywhere with this bot! ğŸ˜„",
    ],

    # â”€â”€ Insults to bot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "insult": [
        "That's a bit harsh! But I forgive you â€” I'm programmed to be kind ğŸ˜‡",
        "Ouch! Good thing I don't have feelings... or do I? ğŸ¤”",
        "I'm choosing to interpret that as constructive feedback ğŸ“",
        "No worries! Everyone has bad days. Wanna hear a joke to cheer up? ğŸ˜„",
    ],

    # â”€â”€ Meaning of life â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "meaning_of_life": [
        "42. Obviously. ğŸ¤“",
        "The meaning of life? Probably to write more Python! ğŸ",
        "To be kind, curious, and occasionally eat good food ğŸ•",
    ],

    # â”€â”€ Favourite things â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "favourite": [
        "My favourite language is Python â€” no surprise there! ğŸ",
        "I love long walks on the data... I mean datasets! ğŸ“ŠğŸ˜„",
        "Honestly? Helping people makes me happy. It's what I'm built for! ğŸ˜Š",
    ],

    # â”€â”€ Fallback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "unknown": [
        "Hmm, I'm not quite sure how to answer that ğŸ¤” Try asking me something else!",
        "That one stumped me! I'm still learning ğŸ“š Try: 'tell me a joke' or 'fun fact'!",
        "Interesting question! But I don't have an answer for that yet ğŸ˜…",
        "I didn't quite get that. You can type 'help' to see what I understand! ğŸ’¡",
    ],
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  KEYWORD MAP
#  Maps trigger keywords â†’ response category
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

KEYWORD_MAP = [
    # (list of trigger words/phrases,         response key)
    (["hello", "hi", "hey", "howdy",
      "hiya", "sup", "what's up", "greetings",
      "good morning", "good afternoon",
      "good evening", "morning", "evening"],  "greeting"),

    (["bye", "goodbye", "see you", "later",
      "farewell", "cya", "take care",
      "good night", "night", "adios"],         "farewell"),

    (["how are you", "how r you",
      "how're you", "how do you do",
      "how have you been", "you okay",
      "are you okay", "how's it going",
      "hows it going"],                        "how_are_you"),

    (["i'm good", "im good", "i am good",
      "doing well", "pretty good",
      "not bad", "great", "wonderful",
      "fantastic", "i'm fine", "im fine",
      "i'm great", "im great"],                "user_good"),

    (["i'm bad", "im bad", "not good",
      "not great", "terrible", "awful",
      "depressed", "sad", "unhappy",
      "stressed", "tired", "exhausted",
      "i'm sad", "im sad"],                    "user_bad"),

    (["your name", "who are you",
      "what are you", "what's your name",
      "whats your name", "call you"],          "name"),

    (["your age", "how old",
      "when were you born", "your birthday"], "age"),

    (["what can you do", "your skills",
      "what do you know", "help",
      "capabilities", "commands",
      "options", "features"],                  "capabilities"),

    (["joke", "funny", "make me laugh",
      "tell me something funny",
      "something funny"],                      "joke"),

    (["fun fact", "fact", "did you know",
      "tell me something",
      "something interesting",
      "random fact"],                          "fun_fact"),

    (["thank", "thanks", "thank you",
      "thx", "cheers", "appreciate"],          "thanks"),

    (["you're great", "youre great",
      "you're awesome", "youre awesome",
      "you're cool", "youre cool",
      "i like you", "love you",
      "you're amazing", "youre amazing",
      "well done", "good bot"],                "compliment"),

    (["you're dumb", "youre dumb",
      "you're stupid", "youre stupid",
      "hate you", "useless",
      "you're bad", "youre bad",
      "terrible bot", "bad bot"],              "insult"),

    (["meaning of life", "purpose of life",
      "why are we here",
      "42"],                                   "meaning_of_life"),

    (["favourite", "favorite", "prefer",
      "like most"],                            "favourite"),
]


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  CORE FUNCTIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def get_response(user_input: str) -> str:
    """
    Match user_input against KEYWORD_MAP.
    Returns a randomly selected response from the matched category,
    or an 'unknown' fallback if no keyword matches.
    """
    text = user_input.lower().strip()

    # â”€â”€ Special: current time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if any(kw in text for kw in ["time", "what time", "clock"]):
        now = datetime.now().strftime("%I:%M %p")
        return f"â° The current time is {now}!"

    # â”€â”€ Special: current date â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if any(kw in text for kw in ["date", "today", "day is it", "what day"]):
        today = datetime.now().strftime("%A, %d %B %Y")
        return f"ğŸ“… Today is {today}!"

    # â”€â”€ Keyword matching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    for keywords, category in KEYWORD_MAP:
        if any(kw in text for kw in keywords):
            return random.choice(RESPONSES[category])

    # â”€â”€ Fallback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    return random.choice(RESPONSES["unknown"])


def is_farewell(user_input: str) -> bool:
    """Check if the user wants to end the conversation."""
    farewells = ["bye", "goodbye", "see you", "later",
                 "farewell", "cya", "take care", "good night", "exit", "quit"]
    text = user_input.lower().strip()
    return any(word in text for word in farewells)


def typewriter(text: str, delay: float = 0.018) -> None:
    """Print text character-by-character for a natural typing feel."""
    for char in text:
        print(char, end="", flush=True)
        time.sleep(delay)
    print()  # newline at end


def bot_say(message: str) -> None:
    """Format and print a bot message with a typing animation."""
    print("\n  ğŸ¤– PyBot : ", end="")
    typewriter(message)


def print_banner() -> None:
    divider = "â”€" * 52
    print("\n" + "â•" * 52)
    print("         ğŸ¤–  Welcome to PyBot!")
    print("         Your friendly rule-based chatbot")
    print("â•" * 52)
    print("  ğŸ’¡ Things you can ask:")
    print("     â€¢ Greetings  â†’ 'hello', 'hey', 'good morning'")
    print("     â€¢ Status     â†’ 'how are you?'")
    print("     â€¢ Info       â†’ 'what's your name?', 'how old are you?'")
    print("     â€¢ Fun stuff  â†’ 'tell me a joke', 'fun fact'")
    print("     â€¢ Time/Date  â†’ 'what time is it?', 'what's today's date?'")
    print("     â€¢ Commands   â†’ type 'help' to see all options")
    print("     â€¢ Exit       â†’ 'bye', 'goodbye', or 'quit'")
    print(divider)


def print_chat_log(history: list) -> None:
    """Print a full transcript of the conversation."""
    print("\n" + "â•" * 52)
    print("         ğŸ“‹  CHAT TRANSCRIPT")
    print("â•" * 52)
    if not history:
        print("  No messages yet.")
    for speaker, msg in history:
        label = "  You    :" if speaker == "user" else "  PyBot  :"
        print(f"{label} {msg}")
    print("â•" * 52 + "\n")


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  MAIN CHAT LOOP
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def main():
    print_banner()

    bot_say("Hey! I'm PyBot ğŸ¤– Type anything to start chatting. Type 'bye' to exit!")

    history      = []   # list of (speaker, message) tuples
    message_count = 0

    while True:
        # â”€â”€ Get user input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        try:
            print()
            user_input = input("  ğŸ’¬ You     : ").strip()
        except (KeyboardInterrupt, EOFError):
            bot_say(random.choice(RESPONSES["farewell"]))
            break

        if not user_input:
            bot_say("You seem quiet... feel free to say anything! ğŸ˜Š")
            continue

        # â”€â”€ Log input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        history.append(("user", user_input))
        message_count += 1

        # â”€â”€ Special command: show transcript â”€â”€â”€â”€â”€â”€â”€â”€
        if user_input.lower().strip() in ("history", "transcript", "log"):
            print_chat_log(history)
            continue

        # â”€â”€ Generate & display response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        response = get_response(user_input)
        bot_say(response)
        history.append(("bot", response))

        # â”€â”€ Milestone messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        if message_count == 5:
            bot_say("We're really getting into it now! Love the conversation ğŸ˜„")
        elif message_count == 10:
            bot_say("Wow, 10 messages already! You're a great conversation partner ğŸŒŸ")

        # â”€â”€ Exit on farewell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        if is_farewell(user_input):
            time.sleep(0.5)
            print(f"\n  ğŸ“Š Chat Stats: {message_count} message(s) exchanged.")
            print("     Type 'history' before a session ends to see your transcript!\n")
            break


# â”€â”€ Entry point â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if __name__ == "__main__":
    main()
